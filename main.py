from PIL import Image

from config import *

################################################
###################CODING#######################
################################################

# image = Image.new('RGB',(1500, 4000))

# pixels = image.load()

# text = Coder.text_to_cod("""f d s a
# [4p] 6 [8p] [qf]
# [ed] s
# [5a] 7 [9a] [wa]
# [rd] d s a
# [6p] p l
# k l k l
# [6p] p l
# k l k l
# [4qp] p f
# d s
# [5wa] a a
# d d s a
# [6ep] p l
# k l k l
# [6ep] p l
# k l k l
# [4qs] [4qs] [4qs] [4qs]
# [4qf] [4qf] [4qf] [4qf]
# [5wd] [5wd] [5wd] [5wd]
# [5wh] [5wh] [5wh] [5wh]
# [6ej] [6ej] [6ej] [6ej]
# [6ej] j [6e] [6ej] j [6e]
# [6j] j e [6j] j e
# [0uf] [yd] [ts] [ra]
# [4pgj] [qe] [4pgj] [qeuf]
# [4yd] [qe] [4qts] e
# [5ahk] [wr] [5ahk] [wrahk]
# [5yd] [wryd] [5wts] [ra]
# [6psf] [et] [6p] [etlm]
# [6kn] [etlm] [6kn] [etlm]
# [6p] [et] [6p] [etl]
# [6ak] [etsl] [6ak] [etsl]
# [4pgj] [qe] [4pgj] [qeuf]
# [4yd] [qe] [4qts] e
# [5ahk] [wr] [5ahk] [wrahk]
# [5yd] [wryd] [5wts] [ra]
# [6psf] [et] [6p] [etlm]
# [6kn] [etlm] [6kn] [etlm]
# [6p] [et] [6p] [etl]
# [6ak] [etsl] [6ak] [etsl]
# [4qs] [4qs] [4qs] [4qs]
# [4qf] [4qf] [4qf] [4qf]
# [5wd] [5wd] [5wd] [5wd]
# [5wh] [5wh] [5wh] [5wh]
# [6ej] [6ej] [6ej] [6ej]
# [6ej] j [6e] [6ej] j [6e]
# [6ej] j [6e] [6ej] [6j]
# [0uf] [9yd] [8ts] [7ra]
# [4pgj] [qe] [4pgj] [qeuf]
# [4yd] [qe] [4qts] e
# [5ahk] [wr] [5ahk] [wrahk]
# [5yd] [wryd] [5wts] [ra]
# [6psf] [et] [6p] [etlm]
# [6kn] [etlm] [6kn] [etlm]
# [6psf] [et] [6p] [etlm]
# [6kn] [etlm] [6kn] [etlm]
# [4pgj] [qe] [4pgj] [qeuf]
# [4yd] [qe] [4qts] e
# [5ahk] [wr] [5ahk] [wrahk]
# [5yd] [wryd] [5wts] [ra]
# [6psf] [et] [6p] [etlm]
# [6kn] [etlm] [6kn] [etlm]
# [6psf] [et] [6p] [etlm]
# [6kn] [etlm] [6kn] [etlm]
# [6pgj]


# Gravity falls - Main Title Theme

# i-y-e-y-i-y-e-y-i-t-e-t-i-t-e-t-u-T-e-T-u-T-e-T-u-T-e-T-u-T-e-T-[9qey]-[9qe]-[9qe]-[9qe]-[9qe]-[9qe]-[9qeu]-[9qe]-[9qei]-[9qe]-[9qe]-[9qe]-[9qe]-[9qe]-[9qe]-[9qe]-[qetp]-[qet]-[qet]-[qeto]-[qet]-[qet]-[qetp]-[qet]-[qet]-[qet]-[qet]-[qet]-[qet]-[qet]-[qet]-[qet]-[^9qy]-[^9q]-[^9q]-[^9q]-[^9q]-[^9q]-[^9qu]-[^9q]-[^9qi]-[^9q]-[^9q]-[^9q]-[^9qu]-[^9q]-[^9q]-[^9q]-[80wo]-[80w]-[80w]-[80w]-[80wp]-[80w]-[80w]-[80w]-[*60o]-[*60]-[*60]-[*60]-[*60i]-[*60]-[*60]-[*60]-[9qe]-[9qe]-[9qei]-[9qe]-[9qei]-[9qe]-[9qei]-[9qe]-[9qep]-[9qe]-[9qep]-[9qe]-[9qeo]-[9qe]-[9qei]-[9qe]-[qet]-[qet]-[qetp]-[qet]-[qetp]-[qet]-[qetp]-[qet]-[qeto]-[qet]-[qetp]-[qetT]-T-[qeto]-[qet]-[qeti]-[qet]-[^9q]-[^9q]-[^9qi]-[^9q]-[^9qi]-[^9q]-[^9qi]-[^9q]-[^9qp]-[^9q]-[^9qp]-[^9q]-[^9qo]-[^9q]-[^9qi]-[^9q]-[80w]-[80w]-[80wp]-[80w]-[80wp]-[80w]-[80wp]-[80w]-[*60]-[*60]-[60*S]-[*60]-[60*S]-[*60]-[60*S]-[*60]-[9qe]-[9qe]-[9qei]-[9qe]-[9qei]-[9qe]-[9qei]-[9qe]-[qetp]-[qet]-[qetp]-[qet]-[qeto]-[qet]-[qeti]-[qet]-[^9q]-[^9q]-[9q^P]-[^9q]-[9q^P]-[^9q]-[9q^P]-[^9q]-[80wp]-[80w]-[80w]-[80w]-[80ws]-[80w]-[80w]-[80w]-[*60p]-[*60]-[*60]-[*60]-[60*S]-[*60]-[*60]-[*60]-d-g-j-l-S-f-j-l-d|y

# Катюша.


# 9 [qe] 6 [qe] 9 [qe] 6 [qe]
# [9y] [qe] 6 [qeu] [9i] [qe] 6 [qey]
# [9i] [qei] [6u] [qey] [8u] [0w] [6e] [0w]
# [8u] [0w] 6 [0wi] [8o] [0w] 6 [0wu]
# [8o] [0wo] [6i] [0wu] [9y] [qe] 6 [qe]
# [9p] [qe] [6d] [qe] [qs] [et] [8d] [ets]
# [P] [EP] [9p] [wo] [9p] [qe] [6y] [qe]
# w [EP] 9 [wo] [9p] [qe] 6 [qei]
# [8o] [0wp] [6i] [8u] [9y] [qe] 6 [qe]
# [9y] [qe] 6 [qeu] [9i] [qe] 6 [qey]
# [9i] [qei] [6u] [qey] [9u] [qe] [6e] [qe]
# [8u] [0w] 6 [0wi] [8o] [0w] 6 [0wu]
# [8o] [0wo] [6i] [0wu] [9y] [qe] 6 [qe]
# [9p] [qe] [6d] [qe] [qs] [et] [8d] [ets]
# [P] [EP] [9p] [wo] [9p] [qe] [6y] [qe]
# w [EP] 9 [wo] [9p] [qe] 6 [qei]
# [8o] [0wp] [6i] [8u] [9y] [qe] 6 [qe] 6



# [7p] [9Q] [$a] [9Q]-p-[7I] [9Q] [$I] [9Q] [7I] [9Q]-u-[$I] [9Q]-o-[7I] [9Q] $ [9Q] [7o] [0w] [$u] [0w]-p-[7I] [9Q] $ [9Q] [7y] [9Q] [$r] [9Q]-u-[^E] Q [*G] ^ [7?] [7d?] [7S?] [7a?] [29p] [9d] [29I] [29p]a-[30p] [30o] [30I] [30u] [7I?] [7r?] [7y?] [7?] [30u] [30o] [30I] [30u] [7I?] [7r] [7y?] [7?]-y-[30u] [30o] [30I] [30u] [$Qy] [$QT] [$Qr] [$QT] [7r?] [7d?] [7S?] [7a?]a-[29p] [9d] [29I] [29p]-a-[30p] [30o] [30I] [30u] [7I?] [7r?] [7y?] [7y?]y-[30u] [30o] [30I] [30u] [7I?] [7r] [7y?] [7?] [30u] [30o] [30I] [30u] [QI] [*p] [$QP]|[7?] [7G?] G-[7?]f-[7d?]f-[29d] [9G] G-[29]f-[29d]f-[5d] [5G] G-5-f-[5d]f-[$G]h-[$G]-d-[7?] [7?] 3 [3d] [3d]-d-a-3-a4 [4d]-d-[4d]-d4-a-a-$ [$d] [$d]-a-[$d]-f-[$S] [$a] [$^d]-S-[$^] [7?] [7G?] [7G?]-f-[7d?]-f-[29d] [9G]-G-[29G]-f-[29d]-f-[5d] [5G] [5G]-f-[5d]-f-[$G]-h-[$G]-d-[7?] [7?] 3 [3d]-d-[3d]-d-[3a]-a-4 [4d]-d-[4d]-d-[4a]-a-$ [$d]-d-[$d]-a-[$d]-f-[$S] [$G] [$^G] [$^h] [7f?] [7?] [7d?] [7?] [29] [29] [29] [29a] [5d] [5d]-d-[5d]-f-5-G-$ [$G] [$G] [$h] [3f] 3 [3d] 3 4 4 4 4 [$d] [$d]-a-[$d]-f-$-S-$ [$G] [$^G] [$^h] [7f?] [7?] [7d?] [7?] [29f] [29f] [29] [29a] [5d] [5d]-d-[5d]-f-5-G-$ [$G] [$G] [$h] [5f] 5 [5d] 5 6 6 6 6 [2d] [2d]-a-[2d]-f-2-S-$ [$G] [$G] [$h] [7f?] [7?] [7d?] [7?] [29S] [29] [29a] [29] [5d] 5 5 5 [6a] 6 [6p] 6 [2d] 2 2 2 [$S] $ [$p] $ [5a]-d-5 5 5 [$d]-f-$ [$G]-f-[$d]-S-[7d?] [7?] [7?] [7?] [29S] [29] [29a] [29] [5d] 5 5 5 [6a] 6 [6p] 6 [2d] 2 2 2 [$S] $ [$p] $ [5a]-d-5 5 5 [$d]-f-$ [$G]-f-[$d]-S-[7a?] [7d?] [7S?] [7a?] [29p] [9d] [29I] [29p]-a-[30p] [30o] [30I] [30u]-u-[7I?] [7r?] [7y?] [7y?] [30u] [30o] [30I] [30u]-u-[7I?] [7r] [7y?] [7?]-y-[30u] [30o] [30I] [30u] [$Qy] [$QT] [$Qr] [$QT] [7r?] [7d?] [7S?] [7a?] [29p] [9d] [29I] [29p]-a-[30p] [30o] [30I] [30u] [7I?] [7r?] [7y?] [7?] [30u] [30o] [30I]-I-[30u] [7I?] [7r] [7y?] [7y?] [30u] [30o] [30I] [30u] [QI] [*p] [$QP]|[7?] [7G?] [7G?]-f-[7d?]-f-[29d] [9G] [29G]-f-[29d]-f-[5d] [5G] [5G]-f-[5d]-f-[$G]-h-[$G]-d-[7?] [7?] 3 [3d] [3d]-d-[3a]-a-4 [4d]-d-[4d]-d-[4a]-a-$ [$d] [$d]-a-[$d]-f-[$S] [$a] [$^d]-S-[$^] [7?] [7G?] [7G?]-f-[7d?]-f-[29d] [9G]-G-[29G]-f-[29d]-f-[5d] [5G] [5G]-f-[5d]-f-[$G]-h-[$G]-d-[7?] [7?] 3 [3d]-d-[3d]-d-[3a]-a-4 [4d]-d-[4d]-d-[4a]-a-$ [$d]-d-[$d]-a-[$d]-f-[$S] [$G] [$^G] [$^h] [7f?] [7?] [7d?] [7?] [29] [29dG] [29] [29adG] [5d] [5d]-d-[5d]-f-5-G-$ [$G] [$G] [$h] [5f] 5 [5d] 5 [6f] [6f] [6f] [6f] [2d] [2d]-a-[2d]-f-2-S-$ [$G] [$^G] [$^h] [7f?] [7?] [7d?] [7?] [29] [29] [29] [29a] [5d] [5d]-d-[5d]-f-5-G-$ [$G] [$G] [$h] [5f] 5 [5d] 5 6 6 6 6 [2d] [2d]-a-[2d]-f-2-S-$ [$G] [$G] [$h] [7f?] [7?] [7d?] [7?] [29S] [29] [29a] [29] [5d] 5 5 5 [6a] 6 [6p] 6 [2d] 2 2 2 [$S] $ [$p] $ [5a]-d-5 5 5 [$d]-f-$ [$G]-f-[$d]-S-[7d?] [7?] [7?] [7?] [29S] [29] [29a] [29] [5d] 5 5 5 [6a] 6 [6p] 6 [2d] 2 2 2 [$S] $ [$p] $ [5a]-d-5 5 5 [$d]-f-$ [$G]-f-[$d]-S-[7yd?]||[29S]|a|[E5wd]||[^Es]|P|[I29d]||[$QS]|p|[5woa]-d||[$QTd]-f|G-f-d-S-[7ra?]
# """)

# x, y = 0, 0

# for cod in text:
#     for i in cod:
#         if x+1 < image.size[0]:
#             if i == '1':
#                 pixels[x, y] = (255,255,255)
#             else:
#                 pixels[x, y] = (0,0,0)
#             x = x + 1
#         elif x+1 >= image.size[0]:
#             if i == '1':
#                 pixels[x, y] = (255,255,255)
#             else:
#                 pixels[x, y] = (0,0,0)
#             y = y + 1
#             x = 0

#     if x+1 < image.size[0]:
#         pixels[x, y] = (1,0,0)
#         x = x + 1
#     elif x+1 >= image.size[0]:
#         pixels[x, y] = (1,0,0)
#         y = y + 1
#         x = 0

# image = image.crop((0, 0, 1500, y+1))

# image.save('cod.png', 'PNG')

################################################
##################DECODING######################
################################################

cod = []

image = Image.open('cod.png')

for y in range(image.size[1]):
    for x in range(image.size[0]):
        if image.getpixel((x, y)) == (0,0,0):
            cod.append(0)
        elif image.getpixel((x, y)) == (1,0,0):
            cod.append(3)
        else:
            cod.append(1)

cod = [str(num) for num in cod]

cod = ''.join(cod)

cod = cod.split('3')

print(''.join(Decoder.int_to_text(cod)))
